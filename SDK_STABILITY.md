# SDK Stability Promise

Документ фиксирует политику стабильности Python SDK (версия 0.1.0) для Home Console.
Стиль — инженерный, конкретный. Документ описывает что гарантируется SDK, а что остаётся вне ответственности.

## Назначение SDK

- SDK — это тонкий вспомогательный набор утилит для реализации remote system plugins, следующих контракту REMOTE_PLUGIN_CONTRACT.md.
- SDK не является runtime, фреймворком или обязательной зависимостью Core Runtime.
- SDK помогает декларативно формировать metadata, создавать lifecycle handlers и валидировать простые ошибки конфигурации.

## Что считается стабильным начиная с версии 0.1.0

- Интерфейс `RemotePluginBase` и функция `create_lifecycle_handlers`:
  - сигнатуры методов `on_load`, `on_start`, `on_stop`, `on_unload`, `health`, `get_metadata`;
  - поведение `register_service(name, endpoint, method)` и формат `get_metadata()` (включая поле `services`);
  - формат payload для сервисных вызовов (по соглашению `{ "args": [], "kwargs": {...} }`) — рекомендован и документирован;
- Документация: разделы README и REMOTE_PLUGIN_CONTRACT.md, примеры минимального remote-плагина;
- Файлы и имена API, экспортируемые из пакета `home_console_sdk` (`RemotePluginBase`, `create_lifecycle_handlers`) — их интерфейсы считаются стабильными.

## Что считается экспериментальным

- Все реализации и утилиты, ориентированные на in-process плагины (`InternalPluginBase`, `DatabaseClient`, `EventsClient`, `TaskManager`) — остаются экспериментальными относительно совместимости между версиями SDK;
- Вспомогательные хелперы и примеры (внутренние функции в `examples.py`) — могут изменяться без предупреждения;
- Любые не-документированные вспомогательные API и приватные функции — не считаются стабильными.

## Что SDK сознательно НЕ гарантирует

- Безопасность production-уровня (аутентификация, авторизация, шифрование) — SDK не обеспечивает и не навязывает схемы безопасности;
- Производительность, масштабирование, отказоустойчивость remote-плагина — это ответственность реализации плагина и операционного окружения;
- Управление lifecycle плагинов на стороне Core — Core Runtime управляет lifecycle, SDK лишь помогает реализовать HTTP-эндпойнты;
- Совместимость версий до 0.1.0 — обратная совместимость гарантируется только с версии 0.1.0 и выше для заявленных API.

## Политика breaking changes

- Порядок применимости изменений:
  - Патчи (исправления) и минорные улучшения, не меняющие публичные сигнатуры: не являются breaking.
  - Изменения в сигнатурах `RemotePluginBase` или в формате `get_metadata()`/`register_service()` считаются breaking и должны быть утверджены отдельным релизом с повышением мажорной/минорной версии по соглашению семантического версионирования.
- Процесс внесения breaking changes:
  - Явное документирование причины и обратной совместимости в CHANGELOG.md;
  - Предпочтительная стратегия — предоставить устаревающий API (deprecated) и полную документацию миграции минимум на один релиз;
- Ограничения:
  - SDK не будет вводить breaking changes, которые требуют изменений в Core Runtime.

## Философия стабильности

- Контракт важнее реализации: вся логика SDK должна следовать REMOTE_PLUGIN_CONTRACT.md;
- Явность важнее удобства: SDK предпочитает явные вызовы (`register_service`, `create_lifecycle_handlers`) вместо магии (автоматической генерации роутов и скрытых эффектов);
- Простота важнее «умности»: SDK не добавляет retries, backoff, auth, state-machine или прочей инфраструктуры;
- SDK должен быть удаляемым: удаление SDK из проекта не должно лишать разработчика способности реализовать remote plugin по контракту.

## Явные принципы (подтверждение)

- SDK следует REMOTE_PLUGIN_CONTRACT.md и не расширяет контракт скрытыми соглашениями;
- Контракт (REMOTE_PLUGIN_CONTRACT.md) важнее любых SDK-хелперов;
- Явность важнее удобства при проектировании API SDK;
- Простота важнее магии: меньше скрытых побочных эффектов;
- SDK должен оставлять систему понятной без своей наличия (удаляемость).

## Явные предупреждения и ограничения

- in-process API (`InternalPluginBase` и связанные клиенты) НЕ считается стабильным API для remote-плагинов;
- SDK не обещает production-grade безопасность: разработчик обязан обеспечить безопасность при развёртывании;
- SDK не гарантирует обратную совместимость для версий < 0.1.0;
- SDK не ставит задачу управлять или заменять PluginManager/Core Runtime.

## Практические рекомендации

- Используйте `RemotePluginBase` и `create_lifecycle_handlers` для реализации remote-pugin endpoints;
- Валидируйте метаданные через `validate_metadata()` перед развёртыванием;
- Не полагайтесь на приватные или не-документированные функции SDK;
- Документируйте в плагине ваш expected behavior и ограничения (timeouts, expected payloads, error semantics).

## Заключение

- SDK версии 0.1.0 даёт стабильный, минимальный и прозрачный набор инструментов для реализации remote system plugins по контракту.
- Любые дополнительные возможности (auth, retry, advanced instrumentation) должны реализовываться вне SDK или как отдельные, явно обозначенные плагины/компоненты.

---

*Документ создан в рамках политики сохранения архитектурной простоты и защиты Core Runtime от скрытых зависимостей.*
